<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>포켓몬 도감 정보 - 2.1단계 (이미지 준비)</title>
    <style>
        body, h1, h2, ul, li { margin: 0; padding: 0; box-sizing: border-box; }
        body { display: flex; height: 100vh; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background-color: #f4f6f9; }
        .sidebar {
            width: 240px; background-color: #2c3e50; color: white;
            padding: 20px; flex-shrink: 0;
        }
        .sidebar h1 { text-align: center; margin-bottom: 30px; }
        .sidebar .nav-menu { list-style: none; }
        .sidebar .nav-menu li {
            padding: 13px 20px; margin-bottom: 10px; border-radius: 8px;
            cursor: pointer; transition: background-color 0.2s;
        }
        .sidebar .nav-menu li:hover { background-color: #34495e; }
        .sidebar .nav-menu li.active { background-color: #3498db; }
        .main-content { flex-grow: 1; display: flex; overflow-x: auto; }
        .content-column {
            min-width: 320px; background-color: white;
            border-right: 1px solid #e9e9e9;
            padding: 25px;
        }
        .content-column h2 { margin-top: 0; }
        .list-item {
            padding: 12px; margin-bottom: 8px; border-radius: 6px;
            cursor: pointer; border: 1px solid #ddd;
        }
        .list-item:hover { background-color: #f0f0f0; }
        .btn-back {
            margin-bottom: 15px; padding: 8px 12px;
            background-color: #6c757d; color: white;
            border: none; border-radius: 4px; cursor: pointer;
        }
        .btn-back:hover { background-color: #5a6268; }
        .detail-image {
             max-width: 150px;
             display: block;
             margin-bottom: 15px;
             border-radius: 8px;
        }
    </style>
</head>
<body>
    <aside class="sidebar" id="sidebar">
        <h1>포켓몬 정보</h1>
        <ul class="nav-menu">
            <li data-category="pokemonType">포켓몬 타입</li>
            <li data-category="pokemonGrade">포켓몬 등급</li>
            <li data-category="item">아이템</li>
            <li data-category="rune">룬</li>
            <li data-category="chip">칩</li>
            <li data-category="recommendedDeck">추천 덱</li>
            <li data-category="calendar">캘린더</li>
            <li data-category="tips">팁 & 노하우</li>
        </ul>
    </aside>
    <main class="main-content" id="main-content"></main>

    <script src="data.js"></script>
    <script>
        const sidebarEl = document.getElementById('sidebar');
        const mainContentEl = document.getElementById('main-content');
        let navigationPath = [];

        const goBack = () => {
            if (navigationPath.length > 1) {
                navigationPath.pop();
                renderContent();
            }
        };

        const handleItemClick = (newKey) => {
            navigationPath.push(newKey);
            renderContent();
        };

        const renderContent = () => {
            mainContentEl.innerHTML = '';
            if (navigationPath.length === 0) return;

            const currentCategory = navigationPath[0];
            const config = categoryConfig[currentCategory];
            if (!config) return;

            for (let depth = 1; depth < navigationPath.length + 1; depth++) {
                const columnId = config.levels[depth - 1];
                if (!columnId) break; 
                const columnEl = document.createElement('div');
                columnEl.className = 'content-column';
                mainContentEl.appendChild(columnEl);
                populateColumn(columnEl, currentCategory, depth);
            }
        };

        const populateColumn = (columnEl, category, depth) => {
            if (depth > 1) {
                const backButton = document.createElement('button');
                backButton.className = 'btn-back';
                backButton.textContent = '‹ 뒤로가기';
                backButton.onclick = goBack;
                columnEl.appendChild(backButton);
            }

            const config = categoryConfig[category];
            const sourceDataKey = config.dataKeys[depth - 1];
            const sourceData = database[sourceDataKey];
            const renderType = config.renderType[depth - 1];
            const prevKey = navigationPath[depth - 1];
            
            const title = document.createElement('h2');
            title.textContent = prevKey === category ? config.title : prevKey;
            columnEl.appendChild(title);

            if (renderType === 'list') {
                const listData = (depth === 1) ? Object.keys(sourceData) : (sourceData[prevKey] || []);
                listData.forEach(itemKey => {
                    const itemEl = document.createElement('div');
                    itemEl.className = 'list-item';
                    itemEl.textContent = itemKey;
                    itemEl.onclick = () => handleItemClick(itemKey);
                    columnEl.appendChild(itemEl);
                });
            } else if (renderType === 'detail') {
                const detailData = sourceData[prevKey];
                if (detailData && config.detailRenderer) {
                    columnEl.innerHTML += config.detailRenderer(detailData);
                } else {
                    columnEl.innerHTML += `<p>상세 정보가 없습니다.</p>`
                }
            }
        };

        const navItems = sidebarEl.querySelectorAll('.nav-menu li');
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                navItems.forEach(nav => nav.classList.remove('active'));
                item.classList.add('active');
                const category = item.dataset.category;
                navigationPath = [category];
                renderContent();
            });
        });
    </script>
</body>
</html>
