<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>포켓몬 도감 정보</title>
    <style>
        /* 기본 스타일링: 보기 편하도록 최소한으로 구성 */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            display: flex;
            background-color: #f0f2f5;
            height: 100vh;
        }
        .sidebar {
            width: 200px;
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            flex-shrink: 0;
        }
        .sidebar h1 {
            font-size: 1.5em;
            text-align: center;
            margin-bottom: 20px;
        }
        .sidebar .nav-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .sidebar .nav-menu li {
            padding: 12px 15px;
            margin-bottom: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .sidebar .nav-menu li:hover {
            background-color: #34495e;
        }
        .sidebar .nav-menu li.active {
            background-color: #3498db;
        }
        .main-content {
            flex-grow: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        .content-header {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .content-header h2 {
            margin: 0;
            font-size: 1.8em;
            color: #2c3e50;
        }
        .content-body {
            display: flex;
            flex-grow: 1;
            gap: 20px;
        }
        .sub-nav-container {
            width: 220px;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        .sub-nav-container .list-item {
            padding: 10px;
            margin-bottom: 5px;
            border-radius: 4px;
            cursor: pointer;
            border: 1px solid #eee;
        }
        .sub-nav-container .list-item:hover {
            background-color: #f5f5f5;
        }
        .sub-nav-container .list-item.active {
            background-color: #3498db;
            color: white;
            border-color: #3498db;
        }
        .content-display-area {
            flex-grow: 1;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .content-display-area h3 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-top: 0;
        }
        .content-display-area ul {
            list-style-type: none;
            padding-left: 0;
        }
        .content-display-area li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        /* pre 태그는 팁&노하우에서 줄바꿈을 위해 사용됩니다. */
        pre {
            white-space: pre-wrap; /* 자동 줄바꿈 */
            word-wrap: break-word; /* 긴 단어 줄바꿈 */
            font-family: inherit;
            font-size: 1em;
            line-height: 1.6;
        }
        /* 애드센스 광고 슬롯 스타일 (예시) */
        .ad-slot {
            width: 100%;
            min-height: 100px; /* 너비가 0이 되는 것을 방지 */
            background-color: #fafafa;
            border: 1px dashed #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <aside class="sidebar">
        <h1>포켓몬 도감</h1>
        <ul class="nav-menu" id="main-nav">
            <li data-category="pokemonType">포켓몬 타입</li>
            <li data-category="pokemonGrade">포켓몬 등급</li>
            <li data-category="item">아이템</li>
            <li data-category="chip">칩</li>
            <li data-category="recommendedDeck">추천 덱</li>
            <li data-category="calendar">캘린더</li>
            <li data-category="tips">팁 & 노하우</li>
        </ul>
    </aside>

    <main class="main-content">
        <header class="content-header">
            <h2 id="main-title">환영합니다!</h2>
        </header>
        <div class="content-body">
            <div class="sub-nav-container" id="sub-nav-container">
                </div>
            <div class="content-display-area" id="content-display-area">
                <p>왼쪽 메뉴에서 카테고리를 선택하세요.</p>
                </div>
        </div>
    </main>

    <script src="data.js"></script>

    <script>
        // DOM 요소 가져오기
        const mainNav = document.getElementById('main-nav');
        const mainTitle = document.getElementById('main-title');
        const subNavContainer = document.getElementById('sub-nav-container');
        const contentDisplayArea = document.getElementById('content-display-area');

        let currentCategory = ''; // 현재 선택된 메인 카테고리를 저장하는 변수

        // 메인 네비게이션 클릭 이벤트 처리
        mainNav.addEventListener('click', function(e) {
            if (e.target.tagName === 'LI') {
                // 'active' 클래스 관리
                const currentActive = mainNav.querySelector('.active');
                if (currentActive) {
                    currentActive.classList.remove('active');
                }
                e.target.classList.add('active');

                // 카테고리 표시
                currentCategory = e.target.dataset.category;
                showCategoryView(currentCategory);
            }
        });

        // 서브 네비게이션 클릭 이벤트 처리 (이벤트 위임)
        subNavContainer.addEventListener('click', function(e) {
            const target = e.target.closest('.list-item');
            if (target) {
                // 'active' 클래스 관리
                const currentActive = subNavContainer.querySelector('.active');
                if (currentActive) {
                    currentActive.classList.remove('active');
                }
                target.classList.add('active');

                const subCategoryKey = target.dataset.key;
                showSubCategoryContent(subCategoryKey);
            }
        });

        // 메인 카테고리 뷰를 표시하는 함수
        function showCategoryView(category) {
            let title = '';
            let subNavItems = [];

            switch (category) {
                case 'pokemonType':
                    title = '포켓몬 타입별 정보';
                    // database 객체에서 키들을 가져와 subNavItems 배열을 만듭니다.
                    if (database.pokemonByType) subNavItems = Object.keys(database.pokemonByType);
                    break;
                case 'pokemonGrade':
                    title = '포켓몬 등급별 정보';
                    if (database.pokemonByGrade) subNavItems = Object.keys(database.pokemonByGrade);
                    break;
                case 'item':
                    title = '아이템 정보';
                    if (database.itemByColor) subNavItems = Object.keys(database.itemByColor);
                    break;
                case 'chip':
                    title = '칩 정보';
                    if (database.chipInfo) subNavItems = Object.keys(database.chipInfo);
                    break;
                case 'recommendedDeck':
                    title = '추천 덱';
                    if (database.recommendedDecks) subNavItems = Object.keys(database.recommendedDecks);
                    break;
                case 'calendar':
                    title = '캘린더';
                    if (database.calendarEvents) subNavItems = Object.keys(database.calendarEvents);
                    break;
                case 'tips':
                    title = '팁 & 노하우';
                    if (database.tipsAndKnowhow) subNavItems = Object.keys(database.tipsAndKnowhow);
                    break;
            }

            mainTitle.textContent = title;

            // 서브 네비게이션(Lev.2) 생성
            subNavContainer.innerHTML = ''; // 기존 내용 초기화
            subNavItems.forEach(key => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'list-item';
                itemDiv.textContent = key;
                itemDiv.dataset.key = key; // 클릭 시 어떤 항목인지 식별하기 위해 데이터 속성 사용
                subNavContainer.appendChild(itemDiv);
            });
            
            // 컨텐츠 표시 영역(Lev.3) 초기화
            contentDisplayArea.innerHTML = '<p>왼쪽 목록에서 항목을 선택하세요.</p>';
        }

        // 서브 카테고리(Lev.3/4) 내용을 표시하는 함수
        function showSubCategoryContent(key) {
            let contentHTML = '';
            let data;

            // 현재 메인 카테고리에 따라 다른 데이터를 가져와 처리
            switch (currentCategory) {
                case 'pokemonType':
                    data = database.pokemonByType ? database.pokemonByType[key] : undefined;
                    if (data) {
                        contentHTML = `<h3>${key} 포켓몬 목록</h3><ul>${data.map(name => `<li>${name}</li>`).join('')}</ul>`;
                    }
                    break;
                case 'pokemonGrade':
                    data = database.pokemonByGrade ? database.pokemonByGrade[key] : undefined;
                    if (data) {
                        contentHTML = `<h3>${key} 포켓몬 목록</h3><ul>${data.map(name => `<li>${name}</li>`).join('')}</ul>`;
                    }
                    break;
                case 'item':
                     data = database.itemByColor ? database.itemByColor[key] : undefined;
                    if (data) {
                        contentHTML = `<h3>${key} 아이템 목록</h3><ul>${data.map(name => `<li>${name}</li>`).join('')}</ul>`;
                    }
                    break;
                case 'chip':
                    data = database.chipInfo ? database.chipInfo[key] : undefined;
                    // 데이터와 description 속성이 모두 있는지 확인 (TypeError 방지)
                    if (data && data.description) {
                        contentHTML = `<h3>${key} 설명</h3><p>${data.description}</p>`;
                    }
                    break;
                case 'recommendedDeck':
                    data = database.recommendedDecks ? database.recommendedDecks[key] : undefined;
                    if (data) {
                        contentHTML = `<h3>${key} 구성원</h3><ul>${data.map(name => `<li>${name}</li>`).join('')}</ul>`;
                    }
                    break;
                case 'calendar':
                    data = database.calendarEvents ? database.calendarEvents[key] : undefined;
                    if (data) {
                        contentHTML = `<h3>${key} 정보</h3><ul>${data.map(info => `<li>${info}</li>`).join('')}</ul>`;
                    }
                    break;
                case 'tips':
                    data = database.tipsAndKnowhow ? database.tipsAndKnowhow[key] : undefined;
                    if (data) {
                        // <pre> 태그로 감싸서 줄바꿈이 그대로 표시되도록 함
                        contentHTML = `<h3>${key}</h3><pre>${data}</pre>`;
                    }
                    break;
            }

            // 데이터가 없는 경우의 메시지 처리
            if (!contentHTML) {
                contentHTML = '<p>표시할 정보가 없습니다.</p>';
            }

            contentDisplayArea.innerHTML = contentHTML;

            // 애드센스 오류 해결: 컨텐츠가 표시된 후 광고를 로드
            // 아래 주석을 풀고 실제 애드센스 코드를 넣으세요.
            /*
            setTimeout(function() {
                try {
                    (adsbygoogle = window.adsbygoogle || []).push({});
                    console.log('AdSense push attempted.');
                } catch (e) {
                    console.error('AdSense push failed:', e);
                }
            }, 100); // 약간의 지연 시간을 주어 컨테이너 너비가 계산될 시간을 확보
            */
        }
    </script>

</body>
</html>
